const nativeTypes = require("../constants/nativeTypes");
const {printTypeSchemata} = require("./typeSchemaUtils");
const {printSchemaTypes} = require("./schemaTypeUtils");
const {printSchema} = require("./schemaUtils");

function printImports() {
    if (options.serializerEnabled)
        printer.line('import type { Serializable as _Serializable, Serializer as _Serializer } from "@buffela/serializer"')

    if (options.deserializerEnabled)
        printer.line('import type { Deserializable as _Deserializable, Deserializer as _Deserializer } from "@buffela/deserializer"')

    for (const type in schema.primitiveTypes) {
        if (type in nativeTypes) continue;
        printer.line(`import type ${type} from "./primitives/${type}"`)
    }
}

function printTypes() {
    printer.line("// Auto-generated by buffela-js, DO NOT MODIFY")

    printImports()
    printTypeSchemata()
    printSchemaTypes()
    printSchema()
}

module.exports = { printTypes }